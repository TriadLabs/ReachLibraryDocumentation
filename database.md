---
layout: default
title: Database Architecture
nav_order: 6
---

1. TOC
{:toc}

# The Reach Database

The Reach system includes 1) the Reach Shoulder Health VR application, 2) a web portal where end-users can view their progress, and 3) 3rd party games and experiences that interface with Reach APIs. Each of these three components may access Reach databases.

Currently, Reach uses a staging database for development/testing and a production database for end-users.

To be granted database access, [contact the Reach development team.](mailto:support@triadlabs.com){:target='_blank'}

In general, changes and additions to the database structure are made and managed via the Django ORM in order to keep everything neat and tidy. If you are developing an application in conjunction with the Reach team and would like to request additions or updates to the database, [contact the Reach DB admin.](mailto:support@triadlabs.com){:target='_blank'}

# Database Architecture

The database architecture for Reach system components can be divided broadly into tables used primarily for/by Django and tables used primarily for/by VR applications.

## Django Tables and Functions

| User Auth, Permissions, & Profiles   | Description         |
|:-------------------------------|:--------------------|
| account_emailaddress                  | Django-generated table to track user email addresses |
| account_emailconfirmation             | Django-generated table to track user email addresses confirmations |
| auth_group                            | Django-generated table to manage Django user permissions. Not currently used very much.   |
| auth_group_permissions                | Django-generated table to manage Django user permissions. Not currently used very much.   |
| auth_permission                       | Django-generated table to manage Django user permissions. Not currently used very much.   |
| authtoken_token                       | Django plugin generated table to manage token authentication. 3rd party developers may request a token, and tokens reside in this table. Tokens currently do not expire.  |
| Client                                | Profile information that is associated with a ReachUser table entry by means of the user_id foreign key. Currently, the most important entry in this table other than the user_id field is OculusLinkId, which represents the value that end-users have entered for their Oculus account usernames.   |
| django_admin_log                      | Django-generated table to track admin-related changes  |
| django_content_type                   | Django-generated table to parse content types as defined by the Django ORM   |
| django_migrations                     | Django-generated table that tracks "migrations," Django's term for changes made to the database via the Django ORM   |
| django_session                        | Django-generated table that tracks Django user sessions   |
| django_site                           | Django-generated table that manages the overall "site" entry/multi-site entries   |
| OculusToReachUserLink                 | A lookup table of entries generated by the Reach Shoulder Health application that defines the relationship between an Oculus user's screen name (oculus_link) and their Oculus-generated user number (oculus_user). This table is shared somewhat evenly between the web portal and Reach VR applications. |
| Organization                          | A table that defines Organizations, e.g. companies, research institutions, clinics, or other organizations that use Reach and wish to group users together for viewing progress on the portal.  |
| OrganizationOwner                     | A table that defines the owner of an organization. An org owner may approve organization join requests and assign roles to other org members.  |
| OrganizationUser                      | A table that relates ReachUser entries as members of a particular organization. Any Reach user may also request to become an Organization user. |
| OrganizationUser_role                 | A table that makes the Roles table also apply to Organization users (when roles have been assigned by an Org Admin). |
| ReachUser                             | Core Django-generated table that handles user authentication, hashed passwords, user emails, etc. The is_staff and is_superuser flags are occasionally used internally by the team to enable us to see elevated admin functionality in both VR and the portal. The is_superuser flag currently enables VR users to view the admin panel with the Reach Shoulder Health application. |
| ReachUser_groups                      | A Django-generated table to manage groups for ReachUsers. Not currently in use. |
| ReachUser_user_permissions            | A Django-generated table to manage permissions for ReachUsers. Not currently in use. |
| Roles                                 | A table to define ReachUser and OrganizationUser roles. Currently only used in the context of Organization users. |
| sitetree_tree                         | A plugin-generated table. The SiteTree plugin allows breadcrumb navigation to be generated and edited by Django admin users. Each tree is defined as an individual entry in this table. |
| sitetree_treeitem                     | A plugin-generated table; associates individual navigation items (pages) with a site tree and defines their position in the navigation hierarchy. |
| sitetree_treeitem_access_permissions  | A plugin-generated table; sets permissions on SiteTree items. Not currently in use. |
| socialaccount_socialaccount           | Django-generated table that provides frameworking for users to use Social Sign In options. Not currently in use. |
| socialaccount_socialapp               | Django-generated table that provides frameworking for users to use Social Sign In options. Not currently in use. |
| socialaccount_socialapp_sites         | Django-generated table that provides frameworking for users to use Social Sign In options. Not currently in use. |
| socialaccount_socialtoken             | Django-generated table that provides frameworking for users to use Social Sign In options. Not currently in use. |



## Additional Portal Functionality Tables

| Table Name                     | Description         |
|:-------------------------------|:--------------------|
| MarketingSignup                | A table used to integrate Reach web portal sign-ups with 3rd party marketing and user engagement tools.   |
| ReachSurvey                    | A table that defines ids and names of surveys that Reach users may take.  |
| ReachSurveyQuestion            | A table that defines questions and answer types for Reach surveys.  |
| ReachSurveyQuestion_survey     | A one-to-many table that associates survey questions with Reach surveys. |
| ReachSurveyResponse            | A table that records individual responses to Reach surveys. |
| ReachSurveyResponseGroup       | A table that records a datetime for a group of individual survey responses and associates the response group with a ReachUser id. |



## Reach VR Tables and Functions

| Table Name                     | Description         |
|:-------------------------------|:--------------------|
| MotionCaptureSettings          | Reach uses the settings in this table to define global behaviors for motion tracking and target-generation. |
| OculusToReachUserLink          | A lookup table of entries generated by the Reach Shoulder Health application that defines the relationship between an Oculus user's screen name (oculus_link) and their Oculus-generated user number (oculus_user). This table is shared somewhat evenly between the web portal and Reach VR applications. |
| ReachParameters                | Reach uses the settings in this table to define global behaviors for motion tracking and target-generation. |
| ReachVersion                   | The Reach VR application, when installed client-side, will check this table upon running the program to see if an update is required. |
| VolumeSegment                  | Description |
| VolumeSegmentSequence          | Description |
| VRDevices                      | Description |
| VRGameAnalytics                | Description |
| VRGames                        | Description |
| VRGamesLink                    | Description  --OLD?|
| VRMotionCapture                | Description --OLD? |
| VRMotionCaptureCollisionItem   | Description |
| VRMotionCaptureDemonstratedItem| Description |
| VRMotionCapturePrescribedItem  | Description |
| VRMotionCaptureSession         | Description |




## Reach VR Table Details

### MotionCaptureSettings

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| id          | Description goes here. |
| GridDensity          | Description goes here. |
| FireflyLifespan          | Description goes here. |
| MaxFireflies          | Description goes here. |
| NumberOfTimesToPrescribeEachPoint          | Description goes here. |
| CompensationEnabled          | Description goes here. |
| IdleTimeout          | Description goes here. |
| SampleRate        | Description goes here. |
| HitPointThreshold          | Description goes here. |
| FinalRoundTimeInSeconds          | Description goes here. |
| MaxArmLength          | Description goes here. |
| MinArmLength          | Description goes here. |


### ReachParameters

Entries in this table may or may not be applied universally (i.e. to all Reach VR experiences). Check the value in the "Universal" column (0 = not universal, 1 = universal).

GameId indicates whether/how the value was generated for a particular game in the VRGames table.

| Entry Name                     | Description         |
|:-------------------------------|:--------------------|
| id          | Description goes here. |
| GridDensity          | Description goes here. |
| FireflyLifespan          | Description goes here. |
| MaxFireflies          | Description goes here. |
| NumberOfTimesToPrescribeEachPoint          | Description goes here. |
| IdleTimeout          | Description goes here. |
| SampleRate        | Description goes here. |
| HitPointThreshold          | Description goes here. |
| FinalRoundTimeInSeconds          | Description goes here. |
| MaxArmLength          | Description goes here. |
| MinArmLength          | Description goes here. |
| PrecisionMaxColliderGranularity |
| PrecisionMinColliderGranularity |

### VolumeSegment

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| id          | Description goes here. |
| SequenceId          | Description goes here. |
| OrderIndex          | Description goes here. |
| CoordinateKeyX          | Description goes here. |
| CoordinateKeyY          | Description goes here. |
| CoordinateKeyZ          | Description goes here. |

### VolumeSegmentSequence

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| SegmentId          | Description goes here. |
| SegmentName          | Description goes here. |
| Radius          | Description goes here. |
| TargetGranularity          | Description goes here. |
| ColliderGranularity          | Description goes here. |
| Velocity          | Description goes here. |
| Timeout          | Description goes here. |
| GraphicPath          | Description goes here. |
| MaxFireflies          | Description goes here. |
| SegmentFriendlyName          | Description goes here. |
| AnimationPath          | Description goes here. |
| NumSegments          | Description goes here. |
| GameId          | Description goes here. |
| ArmLengthInInches          | Description goes here. |
| IsHull          | Description goes here. |
| IsRecordedTemplate          | Description goes here. |
| IsSequence          | Description goes here. |
| ShoulderX          | Description goes here. |
| IsActive          | Description goes here. |
| InsertTime          | Description goes here. |
| CreatedBy          | Description goes here. |

### VRMotionCaptureCollisionItem

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| FieldName          | Description goes here. |


### VRMotionCaptureDemonstratedItem

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| FieldName          | Description goes here. |

### VRMotionCapturePrescribedItem

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| FieldName          | Description goes here. |

### VRMotionCaptureSession

| Field Name                     | Description         |
|:-------------------------------|:--------------------|
| FieldName          | Description goes here. |

